CREATE DATABASE  IF NOT EXISTS `championat` /*!40100 DEFAULT CHARACTER SET utf8 */ /*!80016 DEFAULT ENCRYPTION='N' */;
USE `championat`;
-- MySQL dump 10.13  Distrib 8.0.25, for Win64 (x86_64)
--
-- Host: localhost    Database: championat
-- ------------------------------------------------------
-- Server version	8.0.25

/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
/*!50503 SET NAMES utf8 */;
/*!40103 SET @OLD_TIME_ZONE=@@TIME_ZONE */;
/*!40103 SET TIME_ZONE='+00:00' */;
/*!40014 SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0 */;
/*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0 */;
/*!40101 SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO' */;
/*!40111 SET @OLD_SQL_NOTES=@@SQL_NOTES, SQL_NOTES=0 */;

--
-- Table structure for table `game_center`
--

DROP TABLE IF EXISTS `game_center`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `game_center` (
  `id` int unsigned NOT NULL AUTO_INCREMENT,
  `tournament_id` int unsigned NOT NULL,
  `date_game` date NOT NULL,
  `score` int unsigned DEFAULT NULL,
  `status_game_id` int unsigned NOT NULL,
  `team_1_id` int unsigned DEFAULT NULL,
  `team_2_id` int unsigned DEFAULT NULL,
  `sportsman_1_id` int unsigned DEFAULT NULL,
  `sportsman_2_id` int unsigned DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `fk_game-center_tournaments1_idx` (`tournament_id`),
  KEY `fk_game-center_status_game1_idx` (`status_game_id`),
  KEY `fk_game-center_team1_idx` (`team_1_id`),
  KEY `fk_game-center_sportsman1_idx` (`sportsman_1_id`),
  KEY `fk_game-center_sportsman2_idx` (`sportsman_2_id`),
  KEY `type_score_fk_idx` (`score`),
  KEY `fk_game-center_team_2_idx` (`team_2_id`),
  CONSTRAINT `fk_game-center_sportsman1` FOREIGN KEY (`sportsman_1_id`) REFERENCES `sportsman` (`id`),
  CONSTRAINT `fk_game-center_sportsman2` FOREIGN KEY (`sportsman_2_id`) REFERENCES `sportsman` (`id`),
  CONSTRAINT `fk_game-center_status_game1` FOREIGN KEY (`status_game_id`) REFERENCES `status_game` (`id`),
  CONSTRAINT `fk_game-center_team_1` FOREIGN KEY (`team_1_id`) REFERENCES `team` (`id`),
  CONSTRAINT `fk_game-center_team_2` FOREIGN KEY (`team_2_id`) REFERENCES `team` (`id`),
  CONSTRAINT `fk_game-center_tournaments1` FOREIGN KEY (`tournament_id`) REFERENCES `tournament` (`id`),
  CONSTRAINT `type_score_fk` FOREIGN KEY (`score`) REFERENCES `type_score` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=301 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `game_center`
--

LOCK TABLES `game_center` WRITE;
/*!40000 ALTER TABLE `game_center` DISABLE KEYS */;
INSERT INTO `game_center` VALUES (1,4,'2022-03-28',NULL,2,2,9,NULL,NULL),(2,10,'2021-08-28',NULL,2,41,44,NULL,NULL),(3,7,'2021-10-28',NULL,2,3,75,NULL,NULL),(4,13,'2021-10-28',2,1,7,58,NULL,NULL),(5,11,'2022-02-28',5,1,NULL,NULL,117,62),(6,14,'2022-05-28',NULL,2,NULL,NULL,39,147),(7,5,'2022-05-28',NULL,2,23,48,NULL,NULL),(8,10,'2022-04-28',NULL,2,41,64,NULL,NULL),(9,2,'2022-02-28',1,1,27,69,NULL,NULL),(10,2,'2022-08-28',2,1,27,69,NULL,NULL),(11,2,'2022-03-28',NULL,2,69,28,NULL,NULL),(12,8,'2021-11-28',NULL,2,78,53,NULL,NULL),(13,5,'2021-11-28',NULL,2,48,68,NULL,NULL),(14,1,'2021-07-28',NULL,3,60,34,NULL,NULL),(15,7,'2022-02-28',NULL,2,75,72,NULL,NULL),(16,8,'2021-10-28',2,1,52,56,NULL,NULL),(17,4,'2021-10-28',NULL,2,2,16,NULL,NULL),(18,7,'2022-11-28',2,1,57,45,NULL,NULL),(19,2,'2022-01-28',NULL,2,69,28,NULL,NULL),(20,1,'2022-07-28',1,1,10,35,NULL,NULL),(21,10,'2021-08-28',NULL,2,46,59,NULL,NULL),(22,5,'2021-12-28',NULL,2,48,68,NULL,NULL),(23,4,'2021-09-28',NULL,2,9,36,NULL,NULL),(24,14,'2022-01-28',NULL,2,NULL,NULL,103,29),(25,11,'2021-09-28',NULL,2,NULL,NULL,147,117),(26,10,'2021-12-28',NULL,2,42,44,NULL,NULL),(27,11,'2022-03-28',NULL,2,NULL,NULL,80,57),(28,2,'2021-10-28',NULL,2,27,28,NULL,NULL),(29,13,'2022-06-28',5,1,7,58,NULL,NULL),(30,14,'2021-08-28',5,1,NULL,NULL,153,95),(31,8,'2021-10-28',NULL,2,78,56,NULL,NULL),(32,11,'2021-11-28',NULL,2,NULL,NULL,62,29),(33,2,'2021-10-28',NULL,2,69,27,NULL,NULL),(34,10,'2022-06-28',2,1,41,15,NULL,NULL),(35,7,'2021-07-28',NULL,2,3,72,NULL,NULL),(36,10,'2021-12-28',NULL,2,1,25,NULL,NULL),(37,13,'2021-09-28',NULL,2,22,5,NULL,NULL),(38,7,'2022-09-28',1,1,57,45,NULL,NULL),(39,7,'2022-02-28',NULL,2,3,72,NULL,NULL),(40,1,'2022-10-28',2,1,10,19,NULL,NULL),(41,2,'2022-02-28',NULL,2,27,69,NULL,NULL),(42,2,'2021-11-28',NULL,2,27,28,NULL,NULL),(43,4,'2022-07-28',2,1,16,13,NULL,NULL),(44,4,'2022-10-28',5,1,8,16,NULL,NULL),(45,5,'2021-08-28',NULL,2,29,23,NULL,NULL),(46,5,'2023-03-28',1,1,23,48,NULL,NULL),(47,4,'2022-08-28',1,1,16,37,NULL,NULL),(48,10,'2022-02-28',1,1,41,25,NULL,NULL),(49,10,'2022-09-28',5,1,1,41,NULL,NULL),(50,4,'2021-07-28',NULL,3,8,37,NULL,NULL),(51,11,'2022-04-28',3,1,NULL,NULL,6,33),(52,11,'2021-10-28',NULL,2,NULL,NULL,35,34),(53,4,'2022-05-28',NULL,2,13,2,NULL,NULL),(54,5,'2022-05-28',NULL,2,68,48,NULL,NULL),(55,4,'2021-08-28',NULL,2,2,8,NULL,NULL),(56,14,'2021-11-28',4,1,NULL,NULL,186,146),(57,2,'2022-01-28',NULL,2,27,28,NULL,NULL),(58,11,'2022-08-28',3,1,NULL,NULL,153,29),(59,13,'2022-06-28',1,1,7,50,NULL,NULL),(60,2,'2023-01-28',5,1,27,69,NULL,NULL),(61,1,'2023-01-28',2,1,34,10,NULL,NULL),(62,4,'2022-08-28',5,1,36,8,NULL,NULL),(63,5,'2021-12-28',NULL,2,48,51,NULL,NULL),(64,10,'2022-07-28',5,1,46,44,NULL,NULL),(65,5,'2022-02-28',NULL,2,26,48,NULL,NULL),(66,7,'2022-05-28',NULL,2,3,75,NULL,NULL),(67,7,'2022-03-28',NULL,2,3,45,NULL,NULL),(68,4,'2021-07-28',2,1,16,37,NULL,NULL),(69,2,'2021-12-28',5,1,27,28,NULL,NULL),(70,13,'2021-09-28',NULL,2,58,5,NULL,NULL),(71,2,'2022-01-28',NULL,2,69,28,NULL,NULL),(72,4,'2022-01-28',5,1,8,16,NULL,NULL),(73,10,'2021-11-28',NULL,2,15,59,NULL,NULL),(74,2,'2021-08-28',NULL,2,27,28,NULL,NULL),(76,14,'2021-11-28',NULL,2,NULL,NULL,196,95),(77,2,'2022-03-28',NULL,2,28,27,NULL,NULL),(78,8,'2022-01-28',NULL,2,54,56,NULL,NULL),(79,10,'2021-12-28',NULL,2,59,1,NULL,NULL),(80,13,'2022-10-28',5,1,7,22,NULL,NULL),(81,13,'2022-10-28',1,1,22,58,NULL,NULL),(82,8,'2022-01-28',NULL,2,66,39,NULL,NULL),(83,1,'2022-04-28',NULL,2,71,55,NULL,NULL),(84,7,'2021-10-28',NULL,2,72,57,NULL,NULL),(85,5,'2022-08-28',5,1,68,48,NULL,NULL),(86,1,'2022-12-28',2,1,65,73,NULL,NULL),(87,10,'2021-09-28',NULL,2,64,41,NULL,NULL),(88,14,'2022-02-28',5,1,NULL,NULL,196,27),(89,1,'2021-11-28',2,1,32,35,NULL,NULL),(90,13,'2022-03-28',NULL,2,58,22,NULL,NULL),(91,10,'2023-02-28',2,1,64,44,NULL,NULL),(92,13,'2021-11-28',NULL,2,7,50,NULL,NULL),(93,8,'2021-08-28',2,1,21,53,NULL,NULL),(94,4,'2022-01-28',NULL,2,8,36,NULL,NULL),(95,4,'2022-05-28',1,1,36,9,NULL,NULL),(96,8,'2022-02-28',NULL,2,47,52,NULL,NULL),(97,8,'2021-07-28',NULL,3,52,56,NULL,NULL),(98,11,'2022-04-28',4,1,NULL,NULL,138,186),(99,2,'2022-07-28',1,1,28,69,NULL,NULL),(100,5,'2022-03-28',NULL,2,68,29,NULL,NULL),(101,1,'2021-08-28',NULL,2,79,40,NULL,NULL),(102,10,'2022-04-28',NULL,2,1,44,NULL,NULL),(103,1,'2022-10-28',5,1,71,24,NULL,NULL),(104,11,'2023-01-28',3,1,NULL,NULL,146,80),(105,10,'2022-01-28',2,1,59,44,NULL,NULL),(106,14,'2021-08-28',NULL,2,NULL,NULL,163,113),(107,2,'2022-11-28',2,1,28,69,NULL,NULL),(108,10,'2021-07-28',NULL,3,42,25,NULL,NULL),(109,4,'2021-10-28',2,1,8,2,NULL,NULL),(110,13,'2022-01-28',2,1,50,58,NULL,NULL),(111,13,'2023-02-28',5,1,50,5,NULL,NULL),(112,4,'2022-03-28',NULL,2,37,2,NULL,NULL),(113,1,'2022-01-28',NULL,2,33,31,NULL,NULL),(114,8,'2023-02-28',1,1,56,39,NULL,NULL),(115,4,'2022-12-28',2,1,36,37,NULL,NULL),(116,4,'2022-03-28',5,1,2,36,NULL,NULL),(117,8,'2022-02-28',NULL,2,21,78,NULL,NULL),(118,4,'2021-07-28',NULL,3,13,16,NULL,NULL),(119,2,'2022-05-28',2,1,28,69,NULL,NULL),(120,7,'2021-12-28',2,1,45,75,NULL,NULL),(121,1,'2022-02-28',NULL,2,70,60,NULL,NULL),(122,8,'2022-01-28',NULL,2,52,54,NULL,NULL),(123,10,'2022-03-28',NULL,2,41,59,NULL,NULL),(124,11,'2021-07-28',NULL,3,NULL,NULL,6,39),(125,1,'2021-08-28',NULL,2,65,33,NULL,NULL),(126,13,'2022-04-28',NULL,2,7,58,NULL,NULL),(127,2,'2022-12-28',1,1,69,27,NULL,NULL),(128,13,'2022-01-28',NULL,2,7,22,NULL,NULL),(129,4,'2022-05-28',NULL,2,13,2,NULL,NULL),(130,13,'2021-08-28',NULL,2,50,58,NULL,NULL),(131,14,'2022-05-28',3,1,NULL,NULL,147,153),(132,2,'2022-11-28',1,1,28,27,NULL,NULL),(133,13,'2022-02-28',NULL,2,7,22,NULL,NULL),(134,4,'2021-08-28',NULL,2,8,37,NULL,NULL),(135,10,'2021-11-28',NULL,2,41,59,NULL,NULL),(136,2,'2022-02-28',NULL,2,28,27,NULL,NULL),(137,11,'2021-09-28',NULL,2,NULL,NULL,33,186),(138,13,'2022-09-28',5,1,5,22,NULL,NULL),(140,13,'2023-02-28',2,1,50,7,NULL,NULL),(141,14,'2022-08-28',3,1,NULL,NULL,33,138),(142,14,'2022-03-28',5,1,NULL,NULL,15,6),(143,5,'2021-08-28',2,1,68,26,NULL,NULL),(144,2,'2021-08-28',5,1,27,69,NULL,NULL),(146,7,'2021-10-28',2,1,75,3,NULL,NULL),(147,1,'2022-06-28',2,1,31,65,NULL,NULL),(148,4,'2022-02-28',1,1,9,16,NULL,NULL),(149,10,'2022-03-28',NULL,2,59,41,NULL,NULL),(150,8,'2022-01-28',NULL,2,47,78,NULL,NULL);
/*!40000 ALTER TABLE `game_center` ENABLE KEYS */;
UNLOCK TABLES;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`localhost`*/ /*!50003 TRIGGER `game_center_BEFORE_INSERT` BEFORE INSERT ON `game_center` FOR EACH ROW BEGIN
	IF IFNULL(NEW.team_1_id, NEW.team_2_id) IS NOT NULL  AND IFNULL(NEW.sportsman_1_id, NEW.sportsman_2_id) IS NOT NULL THEN
		SIGNAL SQLSTATE '45001' SET MESSAGE_TEXT = 'INCORRECT INPUT IN COLOMNS sportsman_id OR team_id';
	END IF;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`localhost`*/ /*!50003 TRIGGER `game_center_BEFORE_UPDATE` BEFORE UPDATE ON `game_center` FOR EACH ROW BEGIN
	IF (IFNULL(OLD.team_1_id, OLD.team_2_id) IS NOT NULL AND IFNULL(NEW.sportsman_1_id, NEW.sportsman_2_id) IS NOT NULL)
    OR (IFNULL(NEW.team_1_id, NEW.team_2_id) IS NOT NULL AND IFNULL(OLD.sportsman_1_id, OLD.sportsman_2_id) IS NOT NULL) THEN
		SIGNAL SQLSTATE '45001' SET MESSAGE_TEXT = 'INCORRECT INPUT IN COLOMNS sportsman_id OR team_id';
	END IF;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!40103 SET TIME_ZONE=@OLD_TIME_ZONE */;

/*!40101 SET SQL_MODE=@OLD_SQL_MODE */;
/*!40014 SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS */;
/*!40014 SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS */;
/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
/*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;
/*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */;
/*!40111 SET SQL_NOTES=@OLD_SQL_NOTES */;

-- Dump completed on 2021-07-30 22:35:59
